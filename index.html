<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Grease Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        background: #da291c;
        font-family: Arial Black, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        color: white;
    }

    .login-box {
        background: white;
        color: #2a2a2a;
        padding: 30px;
        border-radius: 15px;
        width: 300px;
        text-align: center;
        border: 4px solid #2a2a2a;
    }

    input {
        width: 90%;
        padding: 10px;
        margin-top: 15px;
        border-radius: 8px;
        border: 2px solid #2a2a2a;
        font-size: 1rem;
    }

    button {
        margin-top: 20px;
        padding: 10px 20px;
        background: #da291c;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        cursor: pointer;
        width: 100%;
    }

    button:hover {
        background: #b71f15;
    }

    .error {
        margin-top: 10px;
        color: red;
        font-size: 0.9rem;
    }
</style>
</head>

<body>

<div class="login-box">
    <h2>Grease Cast Login</h2>
    <input type="password" id="passwordInput" placeholder="Enter Password">
    <button id="loginBtn">Enter</button>
    <div id="errorBox" class="error"></div>
    <p>Something not right? Check the <a style="color: black" href="https://stats.uptimerobot.com/3Y71CTNRdi/802254719">status page</a>.</p>
</div>

<!-- FIREBASE (MODULAR SDK) -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
    import { 
        getAuth, 
        signInWithEmailAndPassword, 
        onAuthStateChanged 
    } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

    /* ---------------- FIREBASE CONFIG ---------------- */
    const firebaseConfig = {
        apiKey: "AIzaSyAecPf2aXR0j1buuDmz9MVrS8aYINs1eCU",
        authDomain: "grease-practicebase.firebaseapp.com",
        projectId: "grease-practicebase",
        storageBucket: "grease-practicebase.firebasestorage.app",
        messagingSenderId: "696484090016",
        appId: "1:696484090016:web:4d7bfe336d842ed946b9c5",
        measurementId: "G-4C78RPXQ99"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    /* ---------------- AUTO-REDIRECT IF LOGGED IN ---------------- */
    onAuthStateChanged(auth, user => {
        if (user) {
            window.location.href = "main.html";
        }
    });

    /* ---------------- LOGIN FUNCTION ---------------- */
    document.getElementById("loginBtn").addEventListener("click", () => {
        const password = document.getElementById("passwordInput").value;
        const email = "auth@grease.practicebase"; // hidden login identity

        signInWithEmailAndPassword(auth, email, password)
            .then(() => {
                window.location.href = "https://practicebase.github.io/Grease-PracticeBase";
            })
            .catch(() => {
                document.getElementById("errorBox").textContent = "Incorrect password";
            });
    });
</script>

</body>
</html>


